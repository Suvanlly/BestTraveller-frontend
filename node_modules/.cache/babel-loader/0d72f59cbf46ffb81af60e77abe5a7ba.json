{"ast":null,"code":"import { DEFAULT_VERSION } from \"redux-persist/es/constants\";\nexport default function createMigrate(migrations, config) {\n  var _ref = config || {},\n      debug = _ref.debug;\n\n  return function (state, currentVersion) {\n    if (!state) {\n      if (process.env.NODE_ENV !== \"production\" && debug) console.log(\"redux-persist: no inbound state, skipping migration\");\n      return Promise.resolve(undefined);\n    }\n\n    var inboundVersion = state._persist && state._persist.version !== undefined ? state._persist.version : DEFAULT_VERSION;\n\n    if (inboundVersion === currentVersion) {\n      if (process.env.NODE_ENV !== \"production\" && debug) console.log(\"redux-persist: versions match, noop migration\");\n      return Promise.resolve(state);\n    }\n\n    if (inboundVersion > currentVersion) {\n      if (process.env.NODE_ENV !== \"production\") console.error(\"redux-persist: downgrading version is not supported\");\n      return Promise.resolve(state);\n    }\n\n    var migrationKeys = Object.keys(migrations).map(function (ver) {\n      return parseInt(ver);\n    }).filter(function (key) {\n      return currentVersion >= key && key > inboundVersion;\n    }).sort(function (a, b) {\n      return a - b;\n    });\n    if (process.env.NODE_ENV !== \"production\" && debug) console.log(\"redux-persist: migrationKeys\", migrationKeys);\n\n    try {\n      var migratedState = migrationKeys.reduce(function (state, versionKey) {\n        if (process.env.NODE_ENV !== \"production\" && debug) console.log(\"redux-persist: running migration for versionKey\", versionKey);\n        return migrations[versionKey](state);\n      }, state);\n      return Promise.resolve(migratedState);\n    } catch (err) {\n      return Promise.reject(err);\n    }\n  };\n}","map":{"version":3,"sources":["/Users/sophiesun/Desktop/besttraveller-frontend/node_modules/redux-persist/es/createMigrate.js"],"names":["DEFAULT_VERSION","createMigrate","migrations","config","_ref","debug","state","currentVersion","process","env","NODE_ENV","console","log","Promise","resolve","undefined","inboundVersion","_persist","version","error","migrationKeys","Object","keys","map","ver","parseInt","filter","key","sort","a","b","migratedState","reduce","versionKey","err","reject"],"mappings":"AAAA,SAASA,eAAT,QAAgC,4BAAhC;AACA,eAAe,SAASC,aAAT,CAAuBC,UAAvB,EAAmCC,MAAnC,EAA2C;AACxD,MAAIC,IAAI,GAAGD,MAAM,IAAI,EAArB;AAAA,MACEE,KAAK,GAAGD,IAAI,CAACC,KADf;;AAGA,SAAO,UAAUC,KAAV,EAAiBC,cAAjB,EAAiC;AACtC,QAAI,CAACD,KAAL,EAAY;AACV,UAAIE,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,IAAyCL,KAA7C,EACEM,OAAO,CAACC,GAAR,CAAY,qDAAZ;AACF,aAAOC,OAAO,CAACC,OAAR,CAAgBC,SAAhB,CAAP;AACD;;AAED,QAAIC,cAAc,GAChBV,KAAK,CAACW,QAAN,IAAkBX,KAAK,CAACW,QAAN,CAAeC,OAAf,KAA2BH,SAA7C,GACIT,KAAK,CAACW,QAAN,CAAeC,OADnB,GAEIlB,eAHN;;AAKA,QAAIgB,cAAc,KAAKT,cAAvB,EAAuC;AACrC,UAAIC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,IAAyCL,KAA7C,EACEM,OAAO,CAACC,GAAR,CAAY,+CAAZ;AACF,aAAOC,OAAO,CAACC,OAAR,CAAgBR,KAAhB,CAAP;AACD;;AAED,QAAIU,cAAc,GAAGT,cAArB,EAAqC;AACnC,UAAIC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EACEC,OAAO,CAACQ,KAAR,CAAc,qDAAd;AACF,aAAON,OAAO,CAACC,OAAR,CAAgBR,KAAhB,CAAP;AACD;;AAED,QAAIc,aAAa,GAAGC,MAAM,CAACC,IAAP,CAAYpB,UAAZ,EACjBqB,GADiB,CACb,UAAUC,GAAV,EAAe;AAClB,aAAOC,QAAQ,CAACD,GAAD,CAAf;AACD,KAHiB,EAIjBE,MAJiB,CAIV,UAAUC,GAAV,EAAe;AACrB,aAAOpB,cAAc,IAAIoB,GAAlB,IAAyBA,GAAG,GAAGX,cAAtC;AACD,KANiB,EAOjBY,IAPiB,CAOZ,UAAUC,CAAV,EAAaC,CAAb,EAAgB;AACpB,aAAOD,CAAC,GAAGC,CAAX;AACD,KATiB,CAApB;AAUA,QAAItB,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,IAAyCL,KAA7C,EACEM,OAAO,CAACC,GAAR,CAAY,8BAAZ,EAA4CQ,aAA5C;;AAEF,QAAI;AACF,UAAIW,aAAa,GAAGX,aAAa,CAACY,MAAd,CAAqB,UAAU1B,KAAV,EAAiB2B,UAAjB,EAA6B;AACpE,YAAIzB,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,IAAyCL,KAA7C,EACEM,OAAO,CAACC,GAAR,CACE,iDADF,EAEEqB,UAFF;AAIF,eAAO/B,UAAU,CAAC+B,UAAD,CAAV,CAAuB3B,KAAvB,CAAP;AACD,OAPmB,EAOjBA,KAPiB,CAApB;AAQA,aAAOO,OAAO,CAACC,OAAR,CAAgBiB,aAAhB,CAAP;AACD,KAVD,CAUE,OAAOG,GAAP,EAAY;AACZ,aAAOrB,OAAO,CAACsB,MAAR,CAAeD,GAAf,CAAP;AACD;AACF,GAlDD;AAmDD","sourcesContent":["import { DEFAULT_VERSION } from \"redux-persist/es/constants\";\nexport default function createMigrate(migrations, config) {\n  var _ref = config || {},\n    debug = _ref.debug;\n\n  return function (state, currentVersion) {\n    if (!state) {\n      if (process.env.NODE_ENV !== \"production\" && debug)\n        console.log(\"redux-persist: no inbound state, skipping migration\");\n      return Promise.resolve(undefined);\n    }\n\n    var inboundVersion =\n      state._persist && state._persist.version !== undefined\n        ? state._persist.version\n        : DEFAULT_VERSION;\n\n    if (inboundVersion === currentVersion) {\n      if (process.env.NODE_ENV !== \"production\" && debug)\n        console.log(\"redux-persist: versions match, noop migration\");\n      return Promise.resolve(state);\n    }\n\n    if (inboundVersion > currentVersion) {\n      if (process.env.NODE_ENV !== \"production\")\n        console.error(\"redux-persist: downgrading version is not supported\");\n      return Promise.resolve(state);\n    }\n\n    var migrationKeys = Object.keys(migrations)\n      .map(function (ver) {\n        return parseInt(ver);\n      })\n      .filter(function (key) {\n        return currentVersion >= key && key > inboundVersion;\n      })\n      .sort(function (a, b) {\n        return a - b;\n      });\n    if (process.env.NODE_ENV !== \"production\" && debug)\n      console.log(\"redux-persist: migrationKeys\", migrationKeys);\n\n    try {\n      var migratedState = migrationKeys.reduce(function (state, versionKey) {\n        if (process.env.NODE_ENV !== \"production\" && debug)\n          console.log(\n            \"redux-persist: running migration for versionKey\",\n            versionKey\n          );\n        return migrations[versionKey](state);\n      }, state);\n      return Promise.resolve(migratedState);\n    } catch (err) {\n      return Promise.reject(err);\n    }\n  };\n}\n"]},"metadata":{},"sourceType":"module"}